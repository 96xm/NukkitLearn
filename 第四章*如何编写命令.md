[上一章](第三章*如何编写监听器.md) [下一章]()
# 第一部分 第四章 如何编写命令
参与编写者: MagicLu550
#### 建议学习时间: 30分钟
##### 学习要点: 学习自己创建一个简易的命令

其实创建一个简易的命令很简单，创建的过程也不必多讲，先前我在
[第二章](第二章*插件要素.md)已经提到了如何创建它，大家可以参考

nukkit的原生命令也是很多基于Command创建的.很多项目是需求指令
以使得用户和您的项目操作，也就是作为一个 **接口(Interface)** ,
接下来在基于[第二章](第二章*插件要素.md)的命令注册后，我们介绍
以下nukkit的命令。
nukkit的命令的父类是Command，它有很多的构造方法
```
    public Command(String name) {
        this(name, "", null, new String[0]);
    }

    public Command(String name, String description) {
        this(name, description, null, new String[0]);
    }

    public Command(String name, String description, String usageMessage) {
        this(name, description, usageMessage, new String[0]);
    }

    public Command(String name, String description, String usageMessage, String[] aliases) {
        this.commandData = new CommandData();
        this.name = name.toLowerCase(); // Uppercase letters crash the client?!?
        this.nextLabel = name;
        this.label = name;
        this.description = description;
        this.usageMessage = usageMessage == null ? "/" + name : usageMessage;
        this.aliases = aliases;
        this.activeAliases = aliases;
        this.timing = Timings.getCommandTiming(this);
        this.commandParameters.put("default", new CommandParameter[]{new CommandParameter("args", CommandParamType.RAWTEXT, true)});
    }
```
我们可以知道，nukkit的命令都是toLowerCase的，即小写，也就是说，命令不区分大小写。
对于命令如何存储，服务端如何识别一个命令，我们从源码中找到以下资料:

--

命令的区分标识是fallBackPrefix+:+label，默认为指令的名称，一般fallBackPrefix都写""

这一块知识缺点将会有其他人补充[1]

代码依据 - SimpleCommandMap.java
```
159 private boolean registerAlias(Command command, boolean isAlias, String fallbackPrefix, String label) {
160      this.knownCommands.put(fallbackPrefix + ":" + label, command);

```
--


存储指令的容器是实现CommandMap接口的，即SimpleCommandMap,我们可以通过
```
        this.getServer().getCommandMap();
```
得到CommandMap.

Command,CommandMap有很多方法

1. Command
    1. 根构造方法的参数为
        ```
        String name, String description, String usageMessage, String[] aliases
                
                第一个name是指令名称，最终会转换为全小写
                
                第二个description是指令介绍，用于给玩家查看使用的
                
                第三个usageMessage就是当玩家对命令使用错误，返回的信息
                
                第四个aliases就是指令的别名，指令可以有多个别名
        ```
        当然，也有简化的构造方法，可以根据你的需求任意调用，这里不多阐述，其他的都是为默认值
    2. Command的属性
       
        
    
        

[上一章](第三章*如何编写监听器.md) [下一章]()
